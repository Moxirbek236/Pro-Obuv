{% extends "base.html" %} {% block title %}Sevimlilar - Oyoq kiyim do'koni{%
endblock %} {% block content %}
<div class="card favorites-card p-3">
  <h2 data-translate="favorites_title">‚ù§Ô∏è Sevimlilar</h2>

  {% if favorites %}
  <div class="favorites-grid">
    {% for item in favorites %}
    <div class="favorite-card">
      <div class="fav-media">
        <img
          src="{{ item.image_url or '/static/images/default-product.jpg' }}"
          alt="{{ item.name }}"
          onerror="this.src='/static/images/default-product.jpg'" />
      </div>
      <div class="fav-body">
        <h4 class="fav-title">{{ item.name }}</h4>
        <p class="description">{{ item.description or "" }}</p>
        <div class="fav-meta">
          <span class="price">{{ "{:,.0f}".format(item.price) }} so'm</span>
          <form method="post" action="{{ url_for('add_to_cart') }}">
            <input type="hidden" name="menu_item_id" value="{{ item.id }}" />
            <button type="submit" class="btn btn-sm btn-success">
              üõí Qo'shish
            </button>
          </form>
        </div>
        <form
          method="post"
          action="{{ url_for('remove_from_favorites', menu_item_id=item.id) }}"
          class="mt-2">
          <button
            type="submit"
            class="btn btn-sm btn-danger"
            onclick="return confirm('Sevimlilardan olib tashlaysizmi?')">
            üóëÔ∏è Olib tashlash
          </button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="text-center" style="padding: 50px">
    <h4>Sevimli mahsulotlaringiz yo'q</h4>
    <p>Mahsulotlarni sevimlilar ro'yxatiga qo'shish uchun katalogga o'ting</p>
    <a href="{{ url_for('menu') }}" class="btn btn-primary"
      >üìã Katalogga o'tish</a
    >
  </div>
  {% endif %}
</div>

<style>
  .favorites-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 18px;
  }
  .favorite-card {
    background: #fff;
    border-radius: 10px;
    display: flex;
    overflow: hidden;
    border: 1px solid #e6e6e6;
  }
  .fav-media img {
    width: 120px;
    height: 120px;
    object-fit: cover;
  }
  .fav-body {
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    justify-content: center;
  }
  .fav-title {
    margin: 0;
    font-size: 1rem;
    font-weight: 700;
  }
  .fav-meta {
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: space-between;
  }
  .price {
    font-weight: 800;
    color: #1f2937;
  }
  @media (max-width: 767px) {
    .favorites-grid {
      grid-template-columns: 1fr;
    }
    .fav-media img {
      width: 100px;
      height: 100px;
    }
  }
</style>

<script>
  function increaseQuantity(btn) {
    const input = btn.previousElementSibling;
    let value = parseInt(input.value);
    if (value < 99) {
      input.value = value + 1;
    }
  }

  function decreaseQuantity(btn) {
    const input = btn.nextElementSibling;
    let value = parseInt(input.value);
    if (value > 1) {
      input.value = value - 1;
    }
  }
</script>
{% endblock %}
